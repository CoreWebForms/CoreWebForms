<Project>
  <PropertyGroup>
    <CopyAspxToOutput Condition=" '$(CopyAspxToOutput)' == '' ">true</CopyAspxToOutput>
    <CopyAspxCodeBehindToOutput Condition=" '$(CopyAspxCodeBehindToOutput)' == '' ">true</CopyAspxCodeBehindToOutput>
  </PropertyGroup>

  <ItemGroup>
    <AspxFiles Include="$(MSBuildProjectDirectory)\**\*.aspx" />
    <AspxFiles Include="$(MSBuildProjectDirectory)\**\*.Master" />
    <__CodeBehindFiles Include="$(MSBuildProjectDirectory)\**\*.aspx.vb" />
    <__CodeBehindFiles Include="$(MSBuildProjectDirectory)\**\*.aspx.cs" />
    <__CodeBehindFiles Include="$(MSBuildProjectDirectory)\**\*.Master.vb" />
    <__CodeBehindFiles Include="$(MSBuildProjectDirectory)\**\*.Master.cs" />
  </ItemGroup>

  <ItemGroup Condition="$(CopyAspxToOutput)">
    <None Include="@(AspxFiles)">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <ItemGroup Condition="$(CopyAspxCodeBehindToOutput)">
    <Compile Remove="@(__CodeBehindFiles)" />
    <None Include="@(__CodeBehindFiles)">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>

</Project>
