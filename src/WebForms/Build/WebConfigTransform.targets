<Project>
    <PropertyGroup>
        <__WebConfigXsl>$(MSBuildThisFileDirectory)config.xslt</__WebConfigXsl>
        <__FinalConfigPath>$(OutDir)$(AssemblyName).dll.config</__FinalConfigPath>
    </PropertyGroup>

  <Target Name="TransformWebConfig" AfterTargets="FindWebConfig" Condition=" '$(WebConfigPath)' != '' ">
    <Message Text="Copying AppSettings and ConnectionStrings from '$(WebConfigPath)' to '$(__FinalConfigPath)' " Importance="high" />

    <XslTransformation XslInputPath="$(__WebConfigXsl)" XmlInputPaths="$(WebConfigPath)" OutputPaths="$(__FinalConfigPath)" />

    <ItemGroup>
      <FileWrites Include="$(__FinalConfigPath)" />
    </ItemGroup>
  </Target>

</Project>